<% layout('layouts/boilerplate') %>
<main class="container mt-4">
  <div class="row">
    <h1 class="text-center">Edit Campground</h1>
    <div class="col-6 offset-3">
      <form
        class="validated-form"
        method="POST"
        enctype="multipart/form-data"
        action="/campgrounds/<%=campground._id%>?_method=PUT"
        novalidate
      >
        <div class="mb-3">
          <label class="form-label" for="title">Title</label>
          <input
            class="form-control"
            type="text"
            id="title"
            name="campground[title]"
            value="<%=campground.title%>"
            required
          />
        </div>
        <div class="mb-3">
          <label class="form-label" for="location">Location</label>
          <input
            class="form-control"
            type="text"
            id="location"
            name="campground[location]"
            value="<%=campground.location%>"
            required
          />
        </div>
        <div class="mb-3">
          <label class="form-label" for="price">Campground Price</label>
          <div class="input-group">
            <span class="input-group-text" id="price-label">$</span
            ><input
              type="text"
              class="form-control"
              id="price"
              placeholder="0.00"
              aria-label="price"
              aria-describedby="price-label"
              name="campground[price]"
              value="<%=campground.price%>"
              required
            />
          </div>
        </div>
        <div class="mb-3">
          <label class="form-label" for="description">Description</label>
          <textarea
            class="form-control"
            type="text"
            id="description"
            name="campground[description]"
            required
          >
<%=campground.description%></textarea
          >
        </div>
        <div class="mb-3">
          <label class="form-label" for="image">Add Images</label>
          <input
            class="form-control"
            type="file"
            id="image"
            name="image"
            multiple
          />
        </div>
        <div class="mb-3 table-responsive">
          <label class="form-label" for="delete">
            Check Images For Deletion
          </label>
          <table class="table" id="delete">
            <% campground.images.forEach((img, i) => { %> <% if(i % 2 === 0) {%>
            <tr>
              <% } %>
              <td class="col-4">
                <img
                  src="<%= img.thumbnail %>"
                  alt=""
                  class="img-thumbnail"
                  crossorigin="anonymous"
                />
              </td>
              <td class="col-2 align-middle">
                <label for="image-<%= i %>">
                  <i class="bi bi-trash-fill"></i
                ></label>
                <input
                  type="checkbox"
                  id="image-<%= i %>"
                  name="deleteImages[]"
                  value="<%= img.filename %>"
                />
              </td>
              <% if(i % 2 === 1) {%>
            </tr>
            <% } %> <% }) %>
          </table>
        </div>
        <div class="my-4 d-grid gap-2 d-sm-flex">
          <button class="btn btn-info col-sm-6">Update</button>
          <a
            href="/campgrounds/<%=campground._id%>"
            class="btn btn-secondary col-sm-6"
            >Cancel</a
          >
        </div>
      </form>
    </div>
  </div>
</main>
